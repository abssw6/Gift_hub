<div class="container" data-controller="select">
  <div class="row">
    <div class="col-12">
      <div class="card-body">
            <% if current_user == @event.user %>
              <h5 class="card-title">Add some gifts to your wishlist</h5>
              <%= simple_form_for ([@wishlist, GiftsWishlist.new]) do |f|%>
                <%= f.input :gift_id, collection: Gift.all, input_html: { class: 'select2', data: { select_target: "select2"} }  %>
                <%= button_tag(type: 'submit', class: "button") do %>
                  Add to Wishlist
                <% end %>
              <% end %>
            <% end %>
        </div>
        <% if @wishlist.gifts_wishlists.empty?%>
              <h2> Missing Gifts </h2>
              <% else %>
    <div class="container">
        <div class="row">
          <% @wishlist.gifts_wishlists.each do |gift_wishlist| %>
          <div class="card col-sm-12 col-md-6 col-lg-4" style="background-color:#ddcecde8">
            <%= image_tag gift_wishlist.gift.photo, size:  "150x150" %>
            <h3><%= gift_wishlist.gift.name %></h3>
            <p><%= gift_wishlist.gift.description %></p>
            <a><%= gift_wishlist.gift.link %></a>
            <%=link_to "View Gift",  gift_path(gift_wishlist.gift) %>
              <% if gift_wishlist.gift.usercommits.empty? %>
                <%= simple_form_for [@wishlist, @current_user_commit] do |f| %>
                  <%= f.hidden_field :gift_id, value: gift_wishlist.gift.id  %>
                  <%= f.hidden_field :is_commited, value: true %>
                  <%= f.submit "I'll get this", class: "small-button", disable_with: true %>
                <% end %>
              <% else %>
                <%= link_to "Not Getting",
                  usercommit_path(Usercommit.where(user: current_user, gift: gift_wishlist.gift).first),
                  data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}
                %>
              <% end %>
            </div>
            <% end %>
        </div>
    </div>
            <% end %>
        <div class="d-flex justify-content-around">
        <button class="button" type="button"><%= link_to "Back to Event", event_path(@event) %>
        <button class="button" type="button"><%= link_to "Delete Event", event_path(@event), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}%>
        </div>
    </div>
  </div>
</div>
